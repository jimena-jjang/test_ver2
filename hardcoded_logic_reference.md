# Hardcoded Logic Reference (하드코딩 로직 분석 명세)

이 문서는 프로젝트 내 `views/roadmap.py`, `app.py`, `utils.py` 파일에서 식별된 하드코딩된 로직과 상수값들을 정리한 참조 문서입니다. 향후 유지보수나 리팩토링 시 참고하시기 바랍니다.

---

## 1. `views/roadmap.py` (Roadmap UI 및 렌더링)

### 1-1. 레이아웃 관련 상수 (Layout Constants)
간트 차트의 패널 너비와 날짜 변환 비율 등이 픽셀 단위로 고정되어 있습니다.
- **`PX_PER_DAY = 5`**: 1일을 5픽셀로 계산하여 차트 너비를 결정합니다.
- **`SQUAD_PANEL_PX = 140`**: 좌측 'Squad' 패널의 너비 (140px).
- **`GROUP_PANEL_PX = 200`**: 보조 그룹(Project 등) 패널의 너비 (200px).
- **`BUFFER_DAYS = 5`**: 패널 영역과 실제 데이터 막대 사이의 간격(일 단위 환산).
- **`chart_width = max(1200, ...)`**: 차트의 최소 너비를 1200px로 강제합니다.

### 1-2. 스타일 및 색상 (Visual Styling)
차트의 배경, 선, 폰트 스타일이 코드 내에 직접 정의되어 있습니다.
- **배경 줄무늬 (Zebra Stripes)**:
  - 짝수 행: `rgba(248, 248, 248, 1)` (연한 회색)
  - 홀수 행: `rgba(255, 255, 255, 1)` (흰색)
- **보조 패널 배경**: `#E8E8E8` (연한 회색)
- **오늘(Today) 라인**: 빨간색 점선 (`color="red"`, `width=1.5`, `dash="dot"`).
- **폰트 설정**:
  - 패널 텍스트: `Arial Black` (강조), `Arial` (일반).
  - 글자 크기: 텍스트 길이에 따라 `13px` -> `12px` -> `10px`로 동적 변경되나, 이 임계값(6자, 10자)이 하드코딩됨.

### 1-3. 데이터 로직 및 리스트 (Logic & Lists)
화면에 표시되는 항목의 순서나 특정 필터링 규칙이 리스트로 고정되어 있습니다.
- **메트릭(Metrics) 표시 순서**:
  상단 현황판에 표시되는 카드의 순서가 코드에 박혀 있습니다.
  `metrics_order = ["표시 중인 과제", "🔥 오늘 진행중", "진행 완료", "진행 중", ...]`
- **범례(Legend) 순서**:
  차트 하단 범례의 순서가 고정되어 있습니다.
  `legend_status = ['진행 완료', '진행 중', '진행 예정', '보류/이슈', 'DROP', '단순 인입']`
- **시스템 컬럼 제외**:
  정렬 옵션에서 제외할 컬럼 목록입니다.
  `system_cols = ['Task', 'Start', 'End', 'Comment', ...]`
- **정렬 우선순위**:
  사용자가 선택 가능한 정렬 기준의 노출 순서입니다.
  `priority = ['Group', 'Goal', 'Status', 'Type']`

---

## 2. `app.py` (메인 앱 진입점)

### 2-1. 네비게이션 및 페이지 구조
- **페이지 목록**: 사이드바 네비게이션 메뉴 항목이 고정 문자열입니다.
  `["Roadmap View", "Analysis Report", "Data Ops"]`
- **로드맵 전용 로직**: `page == "Roadmap View"`일 때만 글로벌 필터를 우회(Bypass)하도록 `if/else` 분기 처리가 되어 있습니다.

### 2-2. 필터링 키 (Filtering Keys)
특정 컬럼명이 존재한다는 가정하에 필터가 생성됩니다.
- `'Status'`, `'Squad'`, `'Start'`, `'End'` 컬럼명을 직접 참조하여 사이드바 필터를 생성합니다.

---

## 3. `utils.py` (유틸리티 및 데이터 처리)

### 3-1. 색상 및 스타일 설정 (Color & Style Config)
상태값이나 스쿼드명에 따른 색상이 딕셔너리로 하드코딩되어 있습니다. 데이터 값이 바뀌면 코드도 수정해야 합니다.
- **`STATUS_CONFIG`**:
  - '진행 완료': `#10B981` (Green)
  - '진행 중': `#3B82F6` (Blue)
  - '보류/이슈': `#EF4444` (Red, dashed border)
  - 그 외 '진행 예정', '단순 인입', 'DROP' 등의 색상 정의.
- **`SQUAD_COLORS`**:
  - '회원': `#2C3E50`
  - '커머스': `#8E44AD`
  - '팬덤', 'APP', '내부과제' 등 특정 스쿼드명에 대한 색상 1:1 매핑.
- **`FALLBACK_COLORS`**: 매핑되지 않은 값에 대해 사용할 해시 기반 대체 색상 리스트.

### 3-2. 데이터 매핑 및 전처리 (Data Mapping)
엑셀 파일의 한글 컬럼명을 내부 영문 변수명으로 변환하는 규칙입니다.
- **`col_map`**:
  - `'Squad (대분류)'` -> `'Squad'`
  - `'Subproject_Name (소분류)'` -> `'Task'`
  - `'시작일 (Start)'` -> `'Start'`
  - `'상태 (Status)'` -> `'Status'`
  - 그 외 `Goal`, `Type`, `Comment` 등 다양한 변형 컬럼명 매핑 포함.

### 3-3. 정렬 및 파일 참조 (Sort & File Reference)
- **상태 정렬 순서 (`status_priority`)**:
- **상태 정렬 순서 (`STATUS_ORDER`)**:
  `['진행 중', '진행 예정', '보류/이슈', '단순 인입', '진행 완료', 'DROP']` 순서로 강제 정렬합니다. (logic.py)
- **참조 파일명**:
  스쿼드 정렬 순서를 파악하기 위해 `'[master]squad order.xlsx'`라는 특정 파일명을 코드 내에서 찾습니다.

### 3-4. 데이터 필터링 (Data Filtering)
- **스쿼드 제외**:
  `logic.py`의 `calculate_utilization_metrics` 함수에서 **'미정'** 및 **'공통'** 스쿼드는 분석 및 리포트 대상에서 강제로 제외됩니다.
